<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          OP Research：AA钱包进化图鉴 - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="钱包账户是进入Web3必不可少的一环，而比特币网络的UTXO模式和以太坊网络的账户模式一直以来都有在被对比优劣，当然两种模式各有千秋，不能单纯说谁更好，只能说更适合哪些场景。" />

  <meta name="keywords" content="区块大全, 区块链, 区块链资讯, 区块链快讯, 区块链新闻, 比特币行情" />






<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/60333/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="OP Research：AA钱包进化图鉴" />
<meta property="og:description" content="钱包账户是进入Web3必不可少的一环，而比特币网络的UTXO模式和以太坊网络的账户模式一直以来都有在被对比优劣，当然两种模式各有千秋，不能单纯说谁更好，只能说更适合哪些场景。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/60333/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-10-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-10-03T00:00:00+00:00" />

<meta itemprop="name" content="OP Research：AA钱包进化图鉴">
<meta itemprop="description" content="钱包账户是进入Web3必不可少的一环，而比特币网络的UTXO模式和以太坊网络的账户模式一直以来都有在被对比优劣，当然两种模式各有千秋，不能单纯说谁更好，只能说更适合哪些场景。"><meta itemprop="datePublished" content="2023-10-03T00:00:00+00:00" />
<meta itemprop="dateModified" content="2023-10-03T00:00:00+00:00" />
<meta itemprop="wordCount" content="10589">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OP Research：AA钱包进化图鉴"/>
<meta name="twitter:description" content="钱包账户是进入Web3必不可少的一环，而比特币网络的UTXO模式和以太坊网络的账户模式一直以来都有在被对比优劣，当然两种模式各有千秋，不能单纯说谁更好，只能说更适合哪些场景。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">OP Research：AA钱包进化图鉴</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2023-10-03">
      2023-10-03
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 10589 字 -
        预计阅读 22 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p>原文作者：CloudY, Jam</p>
<h2 id="概要">概要</h2>
<p>但实际上，被用来对比的以太坊 EOA 账户是一个比较原始的产品，具体来说：</p>
<ul>
<li>
<p>账户控制权单一，只有签名授权和不签名，不论是价值 1 美元的交易还是 1 亿美元的交易，都需要先 approve，再签名确认交易。那么被骗权限和正常交易之间也就差一个签名，这让每个新用户在交互时都胆战心惊。虽然现在 Metamask 在用户 approve 代币权限时会让用户选择批准的用量，但是对频繁交互行为来说，与其多次 approve 消耗 Gas Fee，用户更偏好直接授权数量上限。相比于Web2账户模式中类似 Two Factor Authentication（2 FA）或 U 盾来控制大额交易风险，而扫脸或免密支付来方便小额交易，EOA 账户就显得非常呆板和难用。</p>
</li>
<li>
<p>Gas Fee 门槛太高挡住了大量新用户。以太坊主网和 Optimism/Arbitrum 等 Layer 2 使用的是 ETH 代币作为 Gas 代币，这就要求用户把法币转化成美元稳定币后，还要进一步转换成 ETH，再将 ETH 转入钱包。而很多用户是将美元稳定币转入钱包后才发现需要 ETH 作为 Gas，又不得不再一次购买 ETH。更何况，BSC/Polygon/Solana 等公链都使用着自己的 Gas 代币，这又是一个新人必踩的坑。此外，很多用户并不真的想要购买 Gas 代币的现货，却又因为需要链上交互，不得不留下大量冗余的 Gas 代币在钱包。</p>
</li>
</ul>
<p>EOA 账户这么难用，Vitalik 其实早就知道了，以太坊团队也在尝试解决这个问题，而账户抽象就是解决方案之一。但由于无法为账户抽象修改以太坊底层共识，一直等到 ERC-4337 这个基于应用层的智能合约钱包的方案的提出，账户抽象才真正得到关注，成为热点话题。</p>
<p><strong>本文将在对账户抽象和 ERC-4337 进行简单介绍后，根据账户抽象的应用与Web2账户体系的发展，推测未来Web3账户体系的演进和流量入口归属。</strong></p>
<p>从生态角度看，过往用户需要利用 EOA 才能进行复杂的链上操作，并且由于目前链上生态发展有限，故而只能提供有限的协议，用户的实际需求并不能得到有效的满足。而账户抽象将上述操作执行简化，仅需用户 input，即可得到 output，不再有频繁的点击和繁琐的签名。<strong>可以说，AA 的落地使得链上生态由卖方主导转向买方主导。</strong></p>
<h2 id="账户抽象account-abstaction与erc-4337">账户抽象（Account Abstaction）与 ERC-4337 </h2>
<p>账户抽象（Account Abstaction，以下简称 AA）具体指的是什么？<strong>将底层技术和数据结构抽象，以简化用户和开发者的操作步骤。简单理解就是「在 EOA 的基础上实现 CA」的功能性。</strong></p>
<p>ERC-4337 成为了 AA 的基础标准。ERC-4337 引入了 UserOperation，它是一种表示用户意图的特殊交易，允许合约账户主动执行操作。这些 UserOperation 由一个名为 Bundler 的角色管理，它模拟执行 UserOperation 并将有效的操作添加到一个特殊的交易池。然后，EntryPoint 合约验证和执行这些 UserOperation，以实现用户意图。</p>
<h3 id="账户类型">账户类型</h3>
<p>以太坊中有两种主要类型的账户：EOA（Externally Owned Account）账户和合约（Contract Account）账户。</p>
<p>EOA 账户的地址长度为 20 字节，由用户创建时生成的私钥和椭圆曲线加密算法产生的公钥计算而来。EOA 账户状态包括交易次数（Nonce）和资产数量（Balance）。合约账户的地址也是 20 字节，但是它们是由合约创建交易的发送人地址和 Nonce 计算而来。合约账户状态包括合约数量（Nonce）、资产数量（Balance）、代码哈希（CodeHash）和存储根哈希（StorageRoot），后者用于存储合约数据的 Merkle Patricia Trie 树的根节点哈希值。</p>
<p><strong>账户类型和状态信息对于以太坊上的交易和智能合约执行至关重要，也是 EOA 和 CA 的区别所在。</strong></p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_c1vzzlnrgn.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《Account Abstraction, Analysed ｜Qin Wang∗, Shiping Chen∗ ∗CSIRO Data 61, Australia 》</p>
<h3 id="交易">交易</h3>
<p>以太坊的交易包括发送者和接收者信息、数字签名、交易次数、资金转移数量、可选数据、燃料限制以及交易费用。上述 2 种不同的账户类型产生了 2 种截然不同的通信交易类型。</p>
<p>在签名过程中，交易数据被哈希后进行数字签名，验证人通过计算椭圆曲线上的点来验证签名的有效性，无需获取发送者的私钥，只需提供交易信息和公钥。公钥的恢复是通过签名中的 v 值来实现，确保了签名的安全和验证的高效。</p>
<h3 id="账户抽象">账户抽象</h3>
<p><strong>以太坊的交易结构和签名验证过程揭示了一个重要事实，即发起交易的账户必须是拥有公私钥对的 EOA 账户。</strong></p>
<p>合约账户，由于缺乏公私钥对，无法主动发起交易，而是在接收到交易后根据交易中的信息自动执行账户中的智能合约代码，或向其他账户发送交易信息，甚至创建新的智能合约。因此，目前由主流钱包应用程序如 Metamask 创建的钱包都是 EOA 账户。然而，EOA 账户在使用中存在一些缺陷：私钥风险、签名算法受限、签名权限过高、交易费用限制。</p>
<p>合约账户可以存储代码和数据，并执行预定义的智能合约逻辑来解决 EOA 账户的上述问题。然而，合约账户无法主动发起交易。</p>
<p><strong>账户抽象是对以上两种账户的一种改进，尝试模糊二者之间的界限，变成一种包含复杂逻辑的通用性账户，使账户可以同时拥有 CA（合约账户）和 EOA 账户的功能 。</strong></p>
<h3 id="erc-4337">ERC-4337 </h3>
<p>ERC-4337 在不修改以太坊共识层的情况下完成了账户抽象的功能，成为以太坊最终采用的方案。最终实现链下撮合，链上交易的终极愿景。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_g3a8gsm93k.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《Account Abstraction, Analysed ｜Qin Wang∗, Shiping Chen∗ ∗CSIRO Data 61, Australia 》</p>
<h3 id="useroperation">UserOperation</h3>
<p>ERC-4337 引入了一种名为 UserOperation 的新概念，以解决合约账户无法主动发起交易的问题，同时避免更改以太坊协议底层的交易类型。</p>
<p><strong>UserOperation 与标准交易相似，但它仅表示用户的意图，而不是直接的交易行为。</strong> 标准交易会被发送到以太坊的 mempool（交易池），然后由 searcher 和 builder 组合成一个完整的区块，最终由 proposer 发送到区块链上，通常选择回报最高的区块。与此不同，UserOperation 并不是一笔真正的交易，因此 ERC-4337 引入了一个新的 mempool 和一个名为 Bundler 的角色，以去中心化的方式执行 UserOperation。这种创新允许用户的意图能够被处理和执行，而无需直接参与标准交易流程。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_kwajonhs5b.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source: ERC 4337: account abstraction without Ethereum protocol changes</p>
<h3 id="bundler">Bundler</h3>
<p>Bundler 在处理 UserOperation 时，首先进行基本的合法性检查，然后模拟执行操作以确认签名的有效性。如果模拟执行成功，UserOperation 会被添加到 UserOperation mempool 中，以等待实际链上执行。为了确保模拟和实际执行的一致性，UserOperation 限制了访问可能在执行中发生变化的变量，并只允许访问与发送者地址相关的数据。Bundler 可以根据自己的偏好对 UserOperation 进行打包，优先选择支付更高费用的操作。最终，Bundler 将有效的操作批次发送给 EntryPoint 合约进行链上执行。</p>
<h3 id="entrypoint"> EntryPoint</h3>
<p>EntryPoint 是以太坊中的单例合约，其主要任务是处理 UserOperation 的执行。它有两个关键函数：handleOps 和 handleAggregatedOps，它们都先验证 UserOperation，然后执行操作。验证包括检查账户、签名有效性和费用支付。在执行阶段，使用 UserOperation 中的数据调用目标合约账户中的智能合约代码。不同的智能合约钱包协议可能会有不同的解析和执行方式。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_oqsspwg81o.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source: ERC-4337: Account Abstraction Using Alt Mempool </p>
<h3 id="数据">数据</h3>
<p><strong>根据 SixdegreeLab 的 ERC-4337 半年度数据报告：</strong></p>
<ul>
<li>
<p>在 ERC-4337 合约被部署后，链上共创建了超过 68.7 万个 AA 钱包，调用了超过 200 万次 UserOps，但是 88.24% 的 AA 钱包使用次数不超过 5 次，大多都是直接转账或是铸造 NFT。</p>
</li>
<li>
<p>1.5 万个 Bundlers 中，pimlico 占据了 43.48% ，拥有最大的市场份额，而 Alchemy 则创造了有史以来最高的收入约 2 万美元。</p>
</li>
<li>
<p>可是 97.18% 的 Bundled 交易只含有 1 个 UserOp，这也意味着 90% 的 Bundlers 无法通过打包交易盈利。</p>
</li>
<li>
<p>而 117 个 Paymaster 共累积为 1900 万个 UserOps 代支付了 46.5 万美元 Gas 费用，其中 Pimlico 支付了 43.45% 。</p>
</li>
<li>
<p>ZeroDev 占据了 Wallet Factory 的主导地位，部署了 62.63% 的账户。</p>
</li>
<li>
<p>最常用的 AA 钱包构建方式是 LEGO，即采用不同第三方的 Paymaster、Wallet Factory 和 Bundler。</p>
</li>
</ul>
<p><strong>由此可见，ERC-4337 的采用率还有很大的增长空间，而基础设施的建设也才刚刚开始，这让 AA 的未来充满了可能性。随着 Layer 2 和社交应用的兴起，AA 钱包的使用将会迎来一波快速增长。</strong></p>
<h2 id="账户抽象的发展方向">账户抽象的发展方向</h2>
<p>在了解账户抽象的基本原理和 ERC-4337 的架构之后，我们将进一步探究 AA 的拓展方法。我们不会赘述无私钥和无 Gas 等智能合约钱包的基本功能，而是在 AA 的组件中寻找更多可能性：</p>
<h3 id="架构">架构</h3>
<ul>
<li><strong>原生账户抽象</strong></li>
</ul>
<p>ERC-4337 只是应对当前以太坊无法修改底层共识而采用的应用层解决方案，虽然它能使得账户抽象概念大面积普及，但终归是假借合约账户来进行交互。验证过程额外的 Gas 消耗，其他竞品 ERC 的采用，dapp 对合约账户交互的禁止，都是阻碍 ERC-4337 壮大的因素。</p>
<p>所以原生账户抽象，特别是 Layer 2 的原生账户抽象就显得格外重要。当前 Layer 2 s 中，只有 Starknet 和 ZKSync 两条链支持原生的账户抽象。如下图所示，在原生账户抽象方案中没有 Bundler 和 Paymaster，Starknet 使用 Sequencer 确定交易顺序、支付 Gas 并执行，ZKSync 通过 Operator 确定交易顺序、支付 Gas，再调用 bootloader 一起操作。</p>
<p>而宣称要基于 OP Stack 构建的 DeBank Chain 也要在链级别原生集成类似账户抽象的系统，但具体架构就需要在其主网推出时才能知晓了。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_15pmevp2kw.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《zkSync 中的原生 Account Abstraction 介紹》</p>
<ul>
<li><strong>NFT 合约钱包</strong></li>
</ul>
<p>NFT 合约钱包是类似于 ERC-4337 的一种应用层的账户抽象方案，它们通过 NFT 使得 EOA 账户拥有 CA 账户的功能，而不是借由 Bundler 调用 EntryPoint 合约，当前有两种 NFT 合约钱包的主流实现方式：ERC-6551 和A3S Protocol。</p>
<p>ERC-6551 允许用户使用自己 EOA 钱包中 ERC-721 标准的 NFT 作为控制器，操控一个/多个新创建的智能合约钱包，从而实现在不修改 ERC-721 代码的前提下，通过“外挂合约”的方式去为已有 NFT 匹配一个/多个智能合约账户。这种方式将现有的 NFT 与账户抽象结合，既打开了 NFT 的应用场景又普及了账户抽象的概念。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_3o9mymu8zv.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《EIP-6551 》</p>
<p>A3S Protocol 则是使用 NFT 本身的智能合约本身作为智能合约钱包，也就是说钱包资产就在 NFT 的智能合约账户上，完全跟随 NFT 所有权转移，不需要像 ERC-6551 一样为 NFT 合约外挂一个作为钱包的合约账户，用更短的路径实现了 NFT 合约钱包，但这也意味着对已有 NFT 的不兼容。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_bpqhbmh5qd.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《A3S Protocol Gitbook》</p>
<p>在多链钱包地址的统一上，两个方案都借用了混淆值 Salt 来实现在不同 EVM 兼容公链上获得一样的地址，以解决合约账户多链地址混乱的问题。这也是当初导致 Wintermute 向不同链上多签地址转账丢失 2000 万枚 OP 代币的问题。</p>
<ul>
<li><strong>模块化与多链抽象</strong></li>
</ul>
<p>模块化账户抽象的意义在于像 OP Stack 一样将开发和维护的成本降到最低，让钱包开发者能更多关注产品本身，而不是底层基础设施的构建与维护。当然，由此建立的模块化生态也是模块化平台的立足之本，因此模块化账户抽象一定要实现：</p>
<ol>
<li>
<p> 各模块的相互可组合性（EIP-6900 正尝试设立标准实现）</p>
</li>
<li>
<p> 模块功能的多样性（签名方案/隐私性/抗 MEV/出入金/Intent 等）</p>
</li>
<li>
<p> 安全性（各个模块有统一标准避免储存冲突）</p>
</li>
<li>
<p> 多链抽象（Vitalik 提出用统一的单链密钥库合约来实现多链智能合约账户协同）</p>
</li>
</ol>
<p>我们在上文提到用 Salt 使多链智能合约账户地址一致，但一致的地址只是第一步，更重要的是让用户在操作中对跨链没有感知，即多链抽象，这是模块化的重要一步，也是账户抽象的重要一步。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_10k07r8hbh.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《Future of Smart Accounts: Modular, Specialised Multichain》</p>
<h3 id="签名验证">签名验证</h3>
<p>我们之前提过以太坊上任何交易都只能依赖 EOA 发起并支付 ETH 作为 Gas。除此之外，EOA 只能使用 ECDSA 签名方案，这使得 EOA 的使用非常繁琐且功能单一，还有私钥泄漏风险，而量子计算机问世的那一天，也是以太坊 EOA 账户成为待宰羔羊的一天。</p>
<p><strong>签名算法</strong></p>
<p>在签名层面当前已经有通过智能合约来实现多重签名和社交恢复的方案（Gnosis Safe 和 Argent），也有用所谓签名抽象来实现一次授权后在给定范围内自由与合约交互的方案（Lens Protocl）。但是根据“Not your keys，not your coins”，我们可以多关注签名算法本身：</p>
<ul>
<li><strong>签名聚合</strong></li>
</ul>
<p>通过 Schnorr 或 BLS 实现更高效、更简单的签名，这不仅能从底层实现多签，还能通过聚合签名减少 Gas 消耗。当然他们都有各自的问题，例如需要额外的通信回合，不适合较大值 m 和 n 的多重签名方案，大量匹配验证的时间等。</p>
<ul>
<li><strong>后量子安全签名</strong></li>
</ul>
<p>通过 Lamport 或 W-OTS 等一次性签名来避免他人利用量子计算机破解公开的部分私钥来伪造消息和签名。</p>
<h3 id="useroperation-1">UserOperation</h3>
<ul>
<li><strong>ERC 7521 Intent Centric</strong></li>
</ul>
<p>当我们对比账户抽象，特别是 ERC-4337 ，和 Intent Centric 的架构时，可以发现其实 Bundler 和 Solver 可以是同一个人。也就是说用户的交互内容“UserOperation”可以由 Bundler 来给出，Bundler 解析用户给出的意图提出一个匹配的解决路径，再通过 EntryPoint 合约向用户确认路径的合法性，避免 Bundler 作恶，最后执行被验证的意图路径。</p>
<p>账户抽象和意图的结合将能够实现账户和交互的同步抽象，实现超越Web2的用户体验。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_1yw6kt0od1.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《ERC-7521 》</p>
<p>而整个交易过程可以通过见证人/挑战和响应等过程，使用 ZK 证明技术实现隐私支付。这既能让用户证明交易的有效性，而无需透露发送者的真实地址，还能将多个交易批处理为单个证明，从而减少计算开销并显著提高可扩展性，正所谓降本增效。而一些需要面对监管的企业用户也可以向监管方单独透明化交易，在不牺牲机密性的情况下满足监管合规要求。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_zrh6q1ufrb.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《ZKPayments: Achieving Privacy and Scalability》</p>
<h3 id="bundler-1">Bundler</h3>
<ul>
<li><strong>Bundler MEV 与 Bundler Competition</strong></li>
</ul>
<p>Bundler MEV 和 Bundler Competition 都是基础设施不够完善的结果，Bundler MEV 来自于 Bundler 类似于 Searcher 的交易打包职责，Bundler 可以改变 UserOperation 的提交顺序获利，而 Bundler Competition 则在不同 Bundler 打包同一个 UserOperation 时产生。这与 Searcher 的 Gas War 类似，打包的 UserOperation 没有上链的那个 Bundler 虽然花费了 Gas，但是交易却失败了。</p>
<p>他们都可以借鉴已有的基础设施，例如 MEV-Boost，打通 Bundler 之间以及 Bundler 与 Block Builder 之间的沟通渠道。Etherspot 正在为 AA 开发 mempool 的p2p网络，等待打包的 UserOperations 将在这个p2p网络中传输，一旦被打包并在链上处理，它们将被标记并从列表中删除，从而避免被多个 Bundler 打包。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_yfy8k5kyob.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《为什么 ERC-4337 的 Bundler 需要与 Block Builders 合作》</p>
<h3 id="paymaster">Paymaster</h3>
<ul>
<li><strong>Paymaster 出入金</strong></li>
</ul>
<p>Paymaster 可以为用户支付 Gas Fee，并与用户协商以任意代币或法币作为替代。因此，Paymaster 配合支付服务商为用户提供出入金服务就是一个很好的方案。</p>
<p>Visa 团队在以太坊 Goerli 测试网上部署了两个实验性的 Visa Paymaster 合约，一个用来探索用户是否可以用包括美元稳定币在内其他代币支付费用，另一个则尝试直接赞助交易费用。当然， 将 Paymaster 与现有的 ERC-20 代币整合，需要使用一个外部来源或链上预言机来确定代币价格，并检查 Paymaster 合约是否有批准向用户收取指定的代币。在这套成熟方案下，直接接入 Visa 卡使用法币支付 Gas，甚至实时与 ERC-20 代币进行转换，实现出入金抽象将很大程度降低Web2用户的进入门槛。</p>
<h2 id="web3账户体系演进与未来的web3入口">Web3账户体系演进与未来的Web3入口</h2>
<p>Web2时代的网络流量入口和相应的账户体系演进反映了第二代互联网的快速发展和用户需求的变化。</p>
<p>起初，用户通过门户网站进入互联网，他们可以自由选择门户网站罗列出来的在线资源。然后，搜索引擎的出现使得用户能够通过搜索引擎查询关键词，搜索引擎通过分析 URL 来提供相关结果。Web2时代见证了社交平台的崛起，包括 PC 端和移动端。用户除了主动使用搜索引擎进入Web2，还可以借由 PC 媒体平台的信息被动接触Web2，或是通过 PC/移动自媒体平台自主进入Web2。这期间经历了两次从被动到主动的过程，和一次信息去中心化的过程。</p>
<p>而Web2的账户体系也在一同改变，从最初的短信/彩信以手机号为账户，到 QQ/微信/博客/微博建立多元账户并获得丰富的附加功能和独立的个人网络身份，这些平台引入了个人资料和联系人列表，将用户标识从单一 URL 扩展到更复杂的用户 ID 和社交图谱。</p>
<p><strong>随着网络和硬件技术的发展，出现了两类发展自身生态的方式：</strong></p>
<ol>
<li>
<p>“iOS+Apple Pay+Apple Store”和“微信支付+小程序”在建立自身的账户和支付体系的流量优势后，开辟出一个外部开发者接入的区域从而将用户留在自身体系内，以壮大生态。</p>
</li>
<li>
<p>“淘宝+支付宝”和“抖音+抖音支付”在爆款应用带来的流量基础上发展自己的账户与支付系统，并进一步整合其他应用建立统一的账户与支付系统。</p>
</li>
</ol>
<p>这两种方式都各自有效，并占据了一方天地，微信一个应用内能完成用户的大部分需求，而支付宝支付也可以在各大应用中被找到。</p>
<p>综合而言，Web2时代的流量入口旨在给用户更多主动性和去中心化，而账户体系则从单一到丰富和多元，并通过两种方式实现自身生态的发展。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_iy6qaqrhwi.jpg" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：OP Research</p>
<h2 id="账户体系">账户体系</h2>
<p><strong>Web3时代的账户体系演进既保留了部分Web2的影子，又呈现了独特的发展路径。</strong></p>
<p>Web3时代的账户体系演进延续了部分Web2的特点，同时呈现出独特的发展路径。在Web3中，出现了多种类型的账户，包括插件钱包如 Metamask、软件钱包如 Math 和 Trust、“操作平台”如 dAppOS 和 Gnosis Safe，以及嵌入在 dApp 内部的 UniPass 和交易所内置的 OKX Web3 Wallet。</p>
<ol>
<li>
<p>Metamask 等插件钱包就像是最初的短信能满足用户最基本的需求，虽然哪儿都能用，但功能过于单一。</p>
</li>
<li>
<p>Math 和 Trust 等软件钱包则如同 QQ 与微信在基本功能之上附加了各种提升用户体验的优化和功能，例如多账户管理/社交板块/附属应用等。</p>
</li>
<li>
<p>dAppOS 和 Gnosis Safe 等“操作平台”相比软件钱包更进一步的把基础功能升级构建出另一套先进的账户系统，类似于 Apple 和微信并以自己为核心开发配套“小程序”来丰富生态。</p>
</li>
<li>
<p>UniPass 和 OKX Web3 Wallet 等应用内置钱包就像走另一类账户与支付路线的支付宝和抖音支付，借助一个个爆款应用的流量来发展自己的用户，通过联盟建立生态。</p>
</li>
</ol>
<ul>
<li><strong>流量入口</strong></li>
</ul>
<p><strong>我们曾在《Web3流量入口》这篇文章中提到：</strong></p>
<p>“根据用户进入Web3的流程，我们可以把Web3流量入口定义为两个大类：</p>
<ol>
<li>
<p>账户体系（出入金与资金管理）：中心化交易所、独立出入金项目、出入金聚合器、加密币 ATM、加密币银行卡和场外交易（OTC）；EOA、CA、MPC 钱包和账户抽象（AA）。</p>
</li>
<li>
<p>Web3 dapp（工具、社交与娱乐）：DEX、NFT 市场（Marketplace）、域名、DeSoc、版权交易市场、GameFi、X to Earn。”</p>
</li>
</ol>
<p>如今我们仍旧这么认为，但是根据第二部分内容，所有这些入口都可以成为 AA 钱包的一部分。不过它们也反向地将 AA 钱包的采用路径分为了两类，即上文所述的账户与应用，用户是先获取账户再进行应用交互还是先进行应用交互再使用账户。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_ozce7567oq.png" alt="OP Research：AA钱包进化图鉴"></p>
<h2 id="钱包小程序与wallet-as-a-service">钱包小程序与 Wallet as a Service </h2>
<p>当我们从 AA 采用的进程来看，可以发现最初是 Instadapp 独立的 AA 钱包产品 Avocado 发布，随后 Metamask 发布 Snaps 小程序组件支持部分 AA 功能，支付巨头 Visa 也加入 Paymaster 试水并接入 Visa Card 支付，不久社交应用 Lens Protocol 尝试通过 ERC-6551 建立 AA 钱包，而 Safe 也兼容 ERC-4337 巩固自身“小程序”市场，紧跟着 OKX Wallet 支持使用 AA 钱包，Circle 则是选择发布自己的 AA 钱包。</p>
<p><strong>从中我们不难发现，AA 的采用无外乎两种模式：</strong></p>
<ol>
<li>
<p>自有钱包发布或兼容 AA 利用钱包用户和内部应用小程序来吸引和留住用户。</p>
</li>
<li>
<p>应用/交易所/支付服务商借助自身流量优势，将用户转化为 AA 钱包用户。</p>
</li>
</ol>
<p>这也引出我们需要讨论的部分：既然链上生态因为 AA 的出现将会从卖方市场转变为买方市场，那么用户会对哪种模式买单呢？</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_e96ncfsn4t.png" alt="OP Research：AA钱包进化图鉴"></p>
<p>Source：《Binance Research：Account Abstractation Report》</p>
<h2 id="小程序">小程序</h2>
<p>从短期的采用率来看基于自身钱包发展小程序生态的 AA 模式会更容易得到用户的接纳，本质上来说就是一个 To C 的方案。因为当前尝试 AA 钱包的大部分用户还是Web3用户，所以对于他们来说钱包本身并不陌生也不需要额外的理解就能直接使用，而丰富的功能且流畅的操作体验又能够吸引并留住他们。以 MetaMask 的 Snaps 为例，通过 API 接口允许第三方开发对应钱包小程序来在非 EVM 链交互，看似是为其他钱包引流，但实际上是为自己构建生态进行用户教育。毋庸置疑，MetaMask 彻底兼容 ERC-4337 的那一天，就是它成为 AA 钱包龙头的那一天。</p>
<p><strong>当我们以 dappOS 为例：</strong></p>
<p><strong>dappOS=dappOS Account(多链统一的 EOA)+dappOS Network 。</strong></p>
<p>dappOS Account:让用户使用基于账户抽象的“统一账户”，而不是普通的外部拥有账户(EOA)，这种方式使得用户恢复账户、预批次处理交易、自动化执行等功能的实现成为可能，同时多链钱包聚合的方式也能方便用户对不同链上的资产进行统一管理。</p>
<p>dappOS Network:去中心化网络，帮助用户自动执行钱包和跨链的相关操作，完成交易背后复杂的交互流程。</p>
<p>dappOS 尝试将账户，公链和 Gas Token 的概念抽离，使用户能有类似Web2账户的使用体验，但是由于其还处于相对早期，平台的合作 dapp 有限，不过这并不妨碍它用户数据的增长。因为用户是有动力从 EOA 进入的，特别是需要多账户多链交互的用户，迁移后的交互体验是大于迁移成本的。最重要的是用户一旦进入，这个账户体系基本就不会离开，因为用户在使用的同时也在被教育，首先一开始就接触 AA 钱包的用户是无法使用 EOA 钱包的，其次 dappOS 这一类钱包能满足用户大部分交互需求，用户不必迁移，最后哪怕用户想要迁移，无形中的多链抽象也会让整个迁移过程变得繁琐。</p>
<p>可见，成型的钱包产品可以更快的获得并留住Web3 AA 用户，例如 Safe，Avocado，OKX Wallet 等。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_wvfo34asvq.png" alt="OP Research：AA钱包进化图鉴"></p>
<h2 id="waas">Waas</h2>
<p>WaaS 则是与走小程序路线的 AA 钱包相对的应用路线 AA 钱包。先有应用再有钱包，显然是一个 To B 的方案。应用使用 WaaS 定制自己的钱包来配合产品功能，标准化的 WaaS 模块供不同应用挑选，借助应用的流量来扩大自己的生态，构建 AA 钱包平台，再转向 C 端发行针对用户的客制化钱包，用户自由搭配所需要的钱包功能。</p>
<p>以 Stepn 为例，作为一个出圈应用，Stepn 在全球拥有上千万的用户，而每一个用户都通过 Stepn 创建了一个钱包。倘若 Stepn 内置一个 AA 钱包并以该钱包为核心而不仅仅是 GMT 代币，继续发展生态，例如后续的 MOOAR NFT 交易市场，麻将游戏和 Gashero。那么单单这一个 AA 钱包就能为整个 Crypto 市场带来千万级别的增量用户，而且这些用户都是这个 AA 钱包的高粘性用户，因为对于他们来说迁移成本是极高的。</p>
<p>最近大热的 Friend Tech 也是同理，每一个推特用户都可以是它 AA 钱包的潜在用户，而法币出入金和 Gas 代付能让用户越过Web3的交互障碍，快速融入Web3。</p>
<p><strong>落地产品中我们可以关注 WaaS Pay 和 UniPass，这两个产品分别代表了 WaaS 方向钱包的特点：</strong></p>
<p>• <strong>WaaS Pay</strong> 是一个智能合约帐户部署平台，利用 Safe{Core}协议套件和 Safe{Core}帐户抽象 SDK，专为寻求即时区块链支付同时优先考虑隐私的组织而设计。它提供了一个用户友好的无代码界面来定制智能合约帐户功能，例如社交登录、法定货币进/出坡道以及接收者的无 Gas 交易。通过 ZKBob 通过零知识证明 (ZKP) 促进匿名交易，WaaS Pay 可确保敏感的财务数据保持安全和保密。该平台由 Polygon ZKEVM 提供支持，可保证可扩展性和效率，而带有 Helia 的自托管 IPFS 节点可保护敏感元数据。</p>
<p>• <strong>UniPass</strong> 本质上也是一个为第三方 dapp 提供的 SDK，使得 dapp 可以绕过传统账户私钥和一系列签名以及 Gas 的限制或者托管私钥生成邮箱绑定地址的中心化，直接使用 UniPass 的 DKIM 验证实现邮箱控制的非托管账户，同时经由 Relayer 将链上交互简化，做到无 Gas/签名抽象/社交回复等大大提升用户交互体验的功能。作为一个由场景驱动的应用，UniPass 选择以联邦社交网络的方式，为不同应用提供定制化服务的同时，建立互通的账户体系。再基于由这个联邦社交网络的互通性，在提供数据所有权和隐私保护的前提下，将社交关系上链，建立对数据和资产具有所有权的 DID 证明自身的使用场景，来吸引更多应用使用 UniPass 的 SDK 进入Web3。而这些应用的用户自然而然的就成为了 UniPass 的用户，并使用它继续在Web3交互，且粘性极高。</p>
<p>由此我们也能看出，在成长空间和对Web2用户的获取上 WaaS 路线的 AA 钱包更有优势，但这非常考验团队的产品质量和 BD 能力，不过一旦形成网络效应，就会拥有增长惯性，属于是后期发力的类型。</p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_4mh55th7d4.png" alt="OP Research：AA钱包进化图鉴"></p>
<p><img src="https://img.bibiqing.com/news/2023/1003/4_w3rqsts06d.png" alt="OP Research：AA钱包进化图鉴"></p>
<blockquote>
<p>Reference</p>
<p>[ 1 ]《Sixdegree ERC 4337 半年数据报告 》<a href="https://sixdegree.xyz/research/Half-Year-Data-Report-of-ERC4337-by-Sixdegree.pdf">https://sixdegree.xyz/research/Half-Year-Data-Report-of-ERC4337-by-Sixdegree.pdf</a></p>
<p>[2]《长文深度解读“账户抽象”： 7 年路线演化及赛道图谱》<a href="https://www.chaincatcher.com/article/2085142">https://www.chaincatcher.com/article/2085142</a></p>
<p>[3]《解读币安研究院账户抽象报告》<a href="https://www.techflowpost.com/article/detail_12784.html">https://www.techflowpost.com/article/detail_12784.html</a></p>
<p>[4]《EIP-6551》<a href="https://eips.ethereum.org/EIPS/eip-6551">https://eips.ethereum.org/EIPS/eip-6551</a></p>
<p>[5]《A3S Protocol Gitbook 》<a href="https://a3sprotocolcontact.gitbook.io/a3s-protocol/a3s-v1.0/how-a3s-v1.0-works">https://a3sprotocolcontact.gitbook.io/a3s-protocol/a3s-v1.0/how-a3s-v1.0-works</a></p>
<p>[ 6 ]《Future of Smart Accounts: Modular, Specialised Multichain》<a href="https://longhashvc.medium.com/future-of-smart-accounts-modular-specialised-multichain-d04f083375a6">https://longhashvc.medium.com/future-of-smart-accounts-modular-specialised-multichain-d04f083375a6</a></p>
<p>[7]《为什么 ERC-4337 的 Bundler 需要与 Block Builders 合作》<a href="https://learnblockchain.cn/article/6205">https://learnblockchain.cn/article/6205</a></p>
<p>[8]《账户抽象(Account Abstraction)完整指南》<a href="https://news.marsbit.co/20230302172702633640.html">https://news.marsbit.co/ 20230302172702633640 .html</a></p>
<p>[9]《基础设施如何通过账户抽象为数十亿用户提供支持》<a href="https://www.panewslab.com/zh/articledetails/24hz8399g6my.html">https://www.panewslab.com/zh/articledetails/24hz8399g6my.html</a></p>
<p>[10]《You Could Have Invented Account Abstraction: Part 1 》<a href="https://www.alchemy.com/blog/account-abstraction">https://www.alchemy.com/blog/account-abstraction</a></p>
<p>[11]《以太坊账户抽象研报：拆解 10 个相关 EIP 提案与冲击千万级日活用户的瓶颈问题》<a href="https://www.odaily.news/post/5183201">https://www.odaily.news/post/5183201</a></p>
</blockquote>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/60312/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">OKLink深入剖析：近期法院判决是否司法部门有意平衡SEC监管天平</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/60301/">
                <span class="next-text nav-default">Outlier Ventures 6个Cosmos投资组合项目一览</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#概要">概要</a></li>
    <li><a href="#账户抽象account-abstaction与erc-4337">账户抽象（Account Abstaction）与 ERC-4337 </a>
      <ul>
        <li><a href="#账户类型">账户类型</a></li>
        <li><a href="#交易">交易</a></li>
        <li><a href="#账户抽象">账户抽象</a></li>
        <li><a href="#erc-4337">ERC-4337 </a></li>
        <li><a href="#useroperation">UserOperation</a></li>
        <li><a href="#bundler">Bundler</a></li>
        <li><a href="#entrypoint"> EntryPoint</a></li>
        <li><a href="#数据">数据</a></li>
      </ul>
    </li>
    <li><a href="#账户抽象的发展方向">账户抽象的发展方向</a>
      <ul>
        <li><a href="#架构">架构</a></li>
        <li><a href="#签名验证">签名验证</a></li>
        <li><a href="#useroperation-1">UserOperation</a></li>
        <li><a href="#bundler-1">Bundler</a></li>
        <li><a href="#paymaster">Paymaster</a></li>
      </ul>
    </li>
    <li><a href="#web3账户体系演进与未来的web3入口">Web3账户体系演进与未来的Web3入口</a></li>
    <li><a href="#账户体系">账户体系</a></li>
    <li><a href="#钱包小程序与wallet-as-a-service">钱包小程序与 Wallet as a Service </a></li>
    <li><a href="#小程序">小程序</a></li>
    <li><a href="#waas">Waas</a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.8b200667dc4d9618390c41639250b9c29e57ce80707352fa95af6cb67cf2371a.js" integrity="sha256-iyAGZ9xNlhg5DEFjklC5wp5XzoBwc1L6la9stnzyNxo=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
